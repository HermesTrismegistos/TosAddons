# Enhanced Targetlock
ボスへのタゲがそれてしまい、再ターゲットが困難な時に支援するアドオンです。  

## 注意事項
* マウスモードでの使用はできません。
* 動作について、このアドオンが何をしているか十分ご理解いただいたうえでご使用ください。

## 使い方
初回起動すると`ETL`という文字が画面やや左上に出ますので(見えにくいかもしれません)、任意の場所に移動してください。  
動かせなくなった場合は`/etl initpos`をオープンチャットで入力すると初回位置に戻ります。  
ボス戦でターゲット固定にすると、最も近い位置にいるボスをターゲットします。  


## モード
`ETL`を右クリックすると以下の設定ができます。

* Normal Mode  
0.1.0と同じ動作です。ターゲット固定した瞬間のみボスをターゲットし、以降は何もしません。  
* Reinforced Mode  
ボスへのターゲットが外れた時に、一度だけ再ターゲットを試みます。  
その際、キャラの動きが一瞬だけ止まるかもしれません。
* Overdrive Mode  
ボスへのターゲットが外れた時に、10回まで時間を置き再ターゲットを試みます。  



## 動作
* ターゲット固定にすると、最も近い位置にいるボスへ「マウスによるターゲット」を試みます。  
付近にボスがいない場合はなにもしません。遠すぎるボスへはターゲットしません。  
また、ボス以外には機能しません。
* オープンチャットで`/etl retarget`を入力すると、ターゲット固定したときのボスに対し「マウスによるターゲット」を試みます。
* 「マウスによるターゲット」は以下の順序で行われます。
  
    1. マウスモードをONにします。
    1. HUDの当たり判定を解除します。 (`battlemode`アドオンを内部に組み込んでおります。)
    1. ターゲットしているボスの位置にカーソルを移動します。
    1. もし、ターゲットが取れている場合は、マウスモードを解除し、HUDの当たり判定を復活して動作を終了します。
    1. さもなくば、カーソル位置のワールド座標系におけるY座標を一定量上にあげ、再度ターゲットされている確認します。これを合計8回まで繰り返します。
    1. それでもターゲットできない場合は元に戻し、動作を終了します。    
  
* カーソル座標は、水平解像度が3000以上の場合2倍して計算します。（4Kディスプレイへの対応）
* 再ターゲットは以下の通りに行われます。
* Normal Mode  
ターゲット固定した瞬間のみボスを「マウスによるターゲット」を試みます。以降は何もしません。  
* Reinforced Mode  
ボスへのターゲットが外れた時に、一度だけ「マウスによるターゲット」を試みます。    
ただし、その後1秒以内に再びボスへのターゲットが外れた場合は無視します。  
（連続ターゲット防止によるキャラ操作への支障を避けるため）  
* Overdrive Mode  
ボスへのターゲットが外れた時に、10回まで0.3秒間隔で再ターゲットを試みます。  
ただし、その後1秒以内に再びボスへのターゲットが外れた場合は無視します。  
（連続ターゲット防止によるキャラ操作への支障を避けるため）  

# リリースノート
## v0.2.0  
* 再ターゲット機能の強化  

## v0.1.0
* 見た目の調整
* タゲが外れた場合に色を灰色にするよう変更
## v0.0.2
* クエスト等でHUDが消えた時にETLのウインドウも消えたままになる問題の応急処置  
見えなくなった場合はターゲット固定を有効化してみてください。
* ETLウインドウのサイズを小さくした。（それほど長い名前のモンスターはいないはず）
## v0.0.1
初回
